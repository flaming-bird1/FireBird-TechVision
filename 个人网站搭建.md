# deepseekå»ºè®®

### **1. å½“å‰é—®é¢˜å¿«é€Ÿè§£å†³**

- **å¤´åƒæ˜¾ç¤ºé—®é¢˜**ï¼šæŒ‰ç…§ä¹‹å‰æåˆ°çš„å›¾ç‰‡è·¯å¾„è§£å†³æ–¹æ¡ˆä¿®æ­£å³å¯ã€‚
- **ä¸­æ–‡æ–‡ä»¶å**ï¼šå»ºè®®å°† `çƒˆç„°é£é¸Ÿ.png` æ”¹ä¸ºè‹±æ–‡ï¼ˆå¦‚ `avatar.png`ï¼‰ï¼Œé¿å…æ½œåœ¨å…¼å®¹æ€§é—®é¢˜ã€‚

---

### **2. ç½‘ç«™åŠŸèƒ½å¢å¼ºå»ºè®®**

#### **ï¼ˆ1ï¼‰å­¦ä¹ ç¬”è®°ç³»ç»Ÿ**
- **Markdownæ”¯æŒ**ï¼šé›†æˆMarkdownç¼–è¾‘å™¨ï¼ˆå¦‚ [Vditor](https://vditor.js.org/) æˆ– [ToastUI Editor](https://ui.toast.com/tui-editor)ï¼‰ï¼Œæ–¹ä¾¿ç¼–å†™æŠ€æœ¯ç¬”è®°ã€‚
- **åˆ†ç±»/æ ‡ç­¾**ï¼šä¸ºç¬”è®°æ·»åŠ å­¦ç§‘åˆ†ç±»ï¼ˆå¦‚ã€Œæœºå™¨å­¦ä¹ ã€ã€ŒWebå¼€å‘ã€ï¼‰å’ŒæŠ€æœ¯æ ‡ç­¾ï¼ˆå¦‚ã€ŒVueã€ã€ŒPyTorchã€ï¼‰ã€‚
- **æœç´¢åŠŸèƒ½**ï¼šå®ç°æŒ‰å…³é”®è¯æœç´¢ç¬”è®°å†…å®¹ã€‚

#### **ï¼ˆ2ï¼‰é¡¹ç›®å±•ç¤ºä¼˜åŒ–**
- **åŠ¨æ€æ¼”ç¤º**ï¼šä¸ºé¡¹ç›®æ·»åŠ GIFé¢„è§ˆæˆ–åœ¨çº¿Demoé“¾æ¥ï¼ˆå¦‚GitHub Pagesæˆ–Verceléƒ¨ç½²ï¼‰ã€‚
- **ä»£ç ç‰‡æ®µå±•ç¤º**ï¼šé›†æˆä»£ç é«˜äº®ç»„ä»¶ï¼ˆå¦‚ [Prism.js](https://prismjs.com/)ï¼‰ï¼Œç›´æ¥å±•ç¤ºæ ¸å¿ƒä»£ç ã€‚

#### **ï¼ˆ3ï¼‰å­¦ä¹ è¿›åº¦è¿½è¸ª**
- **æ—¶é—´è½´è§†å›¾**ï¼šç”¨ç”˜ç‰¹å›¾æˆ–æ—¥å†å½¢å¼å±•ç¤ºå­¦ä¹ è®¡åˆ’å®Œæˆæƒ…å†µã€‚
- **æŠ€èƒ½æ ‘**ï¼šå¯è§†åŒ–ä½ çš„æŠ€æœ¯æ ˆæŒæ¡ç¨‹åº¦ï¼ˆå¦‚D3.jsç»˜åˆ¶é›·è¾¾å›¾ï¼‰ã€‚

---

### **3. æŠ€æœ¯å®ç°æ¨è**
- **å‰ç«¯**ï¼šä¿æŒVue 3 + Element Plusï¼Œé€‚åˆå¿«é€Ÿå¼€å‘ã€‚
- **åç«¯ï¼ˆå¯é€‰ï¼‰**ï¼š
  - è½»é‡çº§ï¼šFirebase æˆ– Supabaseï¼ˆå®æ—¶æ•°æ®åº“+è®¤è¯ï¼‰
  - å…¨æ ˆï¼šExpress + MongoDB æˆ– Python Flask/Django
- **éƒ¨ç½²**ï¼šVercelï¼ˆå‰ç«¯ï¼‰ + Railwayï¼ˆåç«¯ï¼‰ï¼Œå­¦ç”Ÿå¯å…è´¹ä½¿ç”¨ã€‚

---

### **4. åç»­é—®é¢˜å‡†å¤‡**
ä½ å¯ä»¥éšæ—¶é—®æˆ‘ä»¥ä¸‹ç±»å‹çš„é—®é¢˜ï¼š
- **åŠŸèƒ½å®ç°**ï¼š  
  - "å¦‚ä½•åœ¨æˆ‘çš„ç½‘ç«™ä¸­æ·»åŠ æš—é»‘æ¨¡å¼ï¼Ÿ"  
  - "æ€æ ·å®ç°ç¬”è®°çš„Markdownå®æ—¶é¢„è§ˆï¼Ÿ"
- **æŠ€æœ¯ç»†èŠ‚**ï¼š  
  - "Vue 3çš„PiniaçŠ¶æ€ç®¡ç†å¦‚ä½•é›†æˆï¼Ÿ"  
  - "å¦‚ä½•ç”¨Dockeréƒ¨ç½²æˆ‘çš„å…¨æ ˆé¡¹ç›®ï¼Ÿ"
- **è®¾è®¡å»ºè®®**ï¼š  
  - "å­¦ä¹ è¿›åº¦é¡µé¢ç”¨ä»€ä¹ˆå¯è§†åŒ–å›¾è¡¨æœ€åˆé€‚ï¼Ÿ"  
  - "ç§»åŠ¨ç«¯å¸ƒå±€å¦‚ä½•ä¼˜åŒ–ï¼Ÿ"

---

### **5. ç«‹å³è¡ŒåŠ¨å»ºè®®**
1. **åŸºç¡€æ¡†æ¶**ï¼šå…ˆå®Œå–„å½“å‰é¡µé¢çš„è·¯ç”±ï¼ˆå¦‚`/notes`ã€`/projects`ï¼‰ã€‚
2. **æ•°æ®æ¨¡æ‹Ÿ**ï¼šç”¨`mockjs`æ¨¡æ‹ŸAPIè¿”å›ç¬”è®°å’Œé¡¹ç›®æ•°æ®ã€‚
3. **ç‰ˆæœ¬æ§åˆ¶**ï¼šç¡®ä¿ä»£ç å·²ä¸Šä¼ GitHubï¼Œä¾¿äºè¿­ä»£å’Œå¤‡ä»½ã€‚

éœ€è¦æˆ‘è¯¦ç»†è§£é‡Šä»»ä½•ä¸€ç‚¹ï¼Œæˆ–ååŠ©è§£å†³å…·ä½“é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼ ğŸš€

ï¼ˆæç¤ºï¼šä¸‹æ¬¡æé—®æ—¶å¯ä»¥ç›´æ¥è¯´éœ€æ±‚ï¼Œæ¯”å¦‚ï¼š"æˆ‘æƒ³åŠ ä¸€ä¸ªæœç´¢ç¬”è®°çš„åŠŸèƒ½ï¼Œä»£ç åº”è¯¥æ€ä¹ˆå†™ï¼Ÿ"ï¼‰

# ä»£ç 

```
from flask import request, jsonify
from app import app, db
from app.service.mnist_service import MNISTPredictor
from app.service.cifar10_service import CIFAR10Predictor


class Result:
    def __init__(self, code=200, message='success', data=None):
        self.code = code
        self.message = message
        self.data = data

    def to_dict(self):
        return {
            'code': self.code,
            'message': self.message,
            'data': self.data
        }


# åˆå§‹åŒ–æœåŠ¡
mnist_predictor = MNISTPredictor(app.config['MNIST_MODEL_PATH'])
cifar10_predictor = CIFAR10Predictor(app.config['CIFAR10_MODEL_PATH'])


@app.route('/mnist/predict', methods=['POST'])
def mnist_predict():
    if 'image' not in request.files:
        return jsonify(Result(400, 'No image uploaded').to_dict())

    try:
        file = request.files['image']
        if not file.filename.lower().endswith(('.png', '.jpg', '.jpeg')):
            return jsonify(Result(400, 'Invalid image format').to_dict())

        result = mnist_predictor.predict(file.read())
        return jsonify(Result(data=result).to_dict())
    except Exception as e:
        return jsonify(Result(500, str(e)).to_dict())


@app.route('/cifar10/predict', methods=['POST'])
def cifar10_predict():
    if 'file' not in request.files:
        return jsonify(Result(400, 'è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶').to_dict())

    try:
        file = request.files['file']
        if not file.filename.lower().endswith(('.png', '.jpg', '.jpeg')):
            return jsonify(Result(400, 'ä»…æ”¯æŒPNG/JPG/JPEGæ ¼å¼').to_dict())

        result = cifar10_predictor.predict(file.read())
        return jsonify(Result(data=result).to_dict())
    except Exception as e:
        return jsonify(Result(500, f'é¢„æµ‹å¤±è´¥: {str(e)}').to_dict())


# æµ‹è¯•æ•°æ®åº“è¿æ¥
@app.route('/test_db', methods=['GET'])
def db_test():
    try:
        db.engine.connect()  # ç›´æ¥ä½¿ç”¨å…¨å±€dbå¯¹è±¡
        return "MySQL è¿æ¥æˆåŠŸï¼"
    except Exception as e:
        return f"MySQL è¿æ¥å¤±è´¥: {str(e)}"

```

# flaskåº”ç”¨

## 1ã€åˆ›å»ºé¡¹ç›®

* é¡¹ç›®ç›®å½•

  ```
  E:\codefile\code-space-loc\
  â””â”€â”€ flask-parts/
      â”œâ”€â”€ app/
      â”‚   â”œâ”€â”€ controller/
      â”‚   â”‚   â”œâ”€â”€ predict_controller.py  
      â”‚   â”‚   â””â”€â”€ user_controller.py     
      â”‚   â”œâ”€â”€ models/
      â”‚   â”‚   â”œâ”€â”€ models.py              
      â”‚   â”‚   â””â”€â”€ user.py                
      â”‚   â”œâ”€â”€ repository/                
      â”‚   â”œâ”€â”€ service/
      â”‚   â”‚   â”œâ”€â”€ cifar10_service.py     
      â”‚   â”‚   â””â”€â”€ mnist_service.py       
      â”‚   â”œâ”€â”€ utils/                     
      â”‚   â””â”€â”€ __init__.py                
      â”œâ”€â”€ model_save/
      â”‚   â”œâ”€â”€ mnist_cnn_net02.pth        
      â”‚   â””â”€â”€ net_0.pth                  
      â”œâ”€â”€ config.py                      
      â””â”€â”€ run.py                         
  ```

  ```mermaid
  graph TD
      A[Controller] -->|è°ƒç”¨| B[Service]
      B -->|è°ƒç”¨| C[Repository]
      C -->|æ“ä½œ| D[Model]
      D -->|ç»§æ‰¿| E[SQLAlchemy]
  ```

  

* flaské…ç½®

  ![](images/flask.png)

## 2ã€è¿æ¥æ•°æ®åº“

[Flask æ•°æ®åº“æ“ä½œ | èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/flask/flask-orm.html)

**==ä½¿ç”¨ SQLAlchemyï¼šå®šä¹‰æ¨¡å‹ï¼Œé…ç½®æ•°æ®åº“ï¼Œæ‰§è¡ŒåŸºæœ¬çš„ CRUD æ“ä½œã€‚==**

* å®‰è£…ä¾èµ–ï¼š

  ```shell
  pip install flask-sqlalchemy
  
  # å…ˆæ¸…é™¤ç¼“å­˜
  conda clean --all -y
  
  # ç„¶åå°è¯•ç”¨æ¸…åæºå®‰è£…
  conda install -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge pymysql
  
  # å¦‚æœä»ç„¶å¤±è´¥ï¼Œæ”¹ç”¨pipå®‰è£…
  pip install pymysql -i https://pypi.tuna.tsinghua.edu.cn/simple
  ```

* `config.py`

  ```python
  import os
  
  
  class Config:
      # æ¨¡å‹è·¯å¾„é…ç½®
      MNIST_MODEL_PATH = './model_save/mnist_cnn_net02.pth'
      CIFAR10_MODEL_PATH = './model_save/net_0.pth'
  
      # å…¶ä»–é…ç½®
      SECRET_KEY = os.environ.get('SECRET_KEY') or 'dev-key-123'
  
      # æ•°æ®åº“é…ç½®
      MYSQL_HOST = os.getenv('MYSQL_HOST', 'localhost')
      MYSQL_USER = os.getenv('MYSQL_USER', 'root')
      MYSQL_PASSWORD = os.getenv('MYSQL_PASSWORD', '12369')
      MYSQL_DB = os.getenv('MYSQL_DB', 'personal_learning_platform')
  
      # åŠ¨æ€ç”Ÿæˆ SQLAlchemy è¿æ¥ URI
      SQLALCHEMY_DATABASE_URI = f'mysql+pymysql://{MYSQL_USER}:{MYSQL_PASSWORD}@{MYSQL_HOST}/{MYSQL_DB}?charset=utf8mb4'
      SQLALCHEMY_TRACK_MODIFICATIONS = False  # ç¦ç”¨äº‹ä»¶ç³»ç»Ÿï¼ˆæ¨èï¼‰
  ```

* `__init__.py`ï¼šåˆå§‹åŒ–æ–‡ä»¶

  ```python
  from flask import Flask
  from flask_sqlalchemy import SQLAlchemy
  from config import Config
  
  """
  å…ˆåˆ›å»ºæ‰€æœ‰æ‰©å±•å®ä¾‹
  
  ç„¶ååˆ›å»ºFlaskåº”ç”¨
  
  æ¥ç€åŠ è½½é…ç½®
  
  æœ€ååˆå§‹åŒ–æ•°æ®åº“
  
  ç¡®ä¿ä¸€åˆ‡å°±ç»ªåæ‰å¯¼å…¥è·¯ç”±
  """
  
  
  # åˆ›å»ºæ‰©å±•å®ä¾‹
  db = SQLAlchemy()
  
  # åˆ›å»ºFlaskåº”ç”¨
  app = Flask(__name__)
  
  # åŠ è½½é…ç½®
  app.config.from_object(Config)
  
  # åˆå§‹åŒ–æ•°æ®åº“
  db.init_app(app)
  
  # æ³¨æ„ï¼šè¿™ä¸ªå¯¼å…¥å¿…é¡»æ”¾åœ¨æœ€åï¼
  # ç¡®ä¿åœ¨appå’Œdbåˆå§‹åŒ–å®Œæˆåå†å¯¼å…¥è·¯ç”±
  from app import routes
  ```

* `routers.py`

  ```python
  from flask import request, jsonify
  from app import app, db  # ä»appæ¨¡å—å¯¼å…¥å·²åˆå§‹åŒ–çš„db
  from app.services.mnist_service import MNISTPredictor
  from app.services.cifar10_service import CIFAR10Predictor
  
  
  class Result:
      def __init__(self, code=200, message='success', data=None):
          self.code = code
          self.message = message
          self.data = data
  
      def to_dict(self):
          return {
              'code': self.code,
              'message': self.message,
              'data': self.data
          }
  
  
  # åˆå§‹åŒ–æœåŠ¡
  mnist_predictor = MNISTPredictor(app.config['MNIST_MODEL_PATH'])
  cifar10_predictor = CIFAR10Predictor(app.config['CIFAR10_MODEL_PATH'])
  
  
  @app.route('/mnist/predict', methods=['POST'])
  def mnist_predict():
      if 'image' not in request.files:
          return jsonify(Result(400, 'No image uploaded').to_dict())
  
      try:
          file = request.files['image']
          if not file.filename.lower().endswith(('.png', '.jpg', '.jpeg')):
              return jsonify(Result(400, 'Invalid image format').to_dict())
  
          result = mnist_predictor.predict(file.read())
          return jsonify(Result(data=result).to_dict())
      except Exception as e:
          return jsonify(Result(500, str(e)).to_dict())
  
  
  @app.route('/cifar10/predict', methods=['POST'])
  def cifar10_predict():
      if 'file' not in request.files:
          return jsonify(Result(400, 'è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶').to_dict())
  
      try:
          file = request.files['file']
          if not file.filename.lower().endswith(('.png', '.jpg', '.jpeg')):
              return jsonify(Result(400, 'ä»…æ”¯æŒPNG/JPG/JPEGæ ¼å¼').to_dict())
  
          result = cifar10_predictor.predict(file.read())
          return jsonify(Result(data=result).to_dict())
      except Exception as e:
          return jsonify(Result(500, f'é¢„æµ‹å¤±è´¥: {str(e)}').to_dict())
  
  
  # æµ‹è¯•æ•°æ®åº“è¿æ¥
  @app.route('/test_db', methods=['GET'])
  def db_test():
      try:
          db.engine.connect()  # ç›´æ¥ä½¿ç”¨å…¨å±€dbå¯¹è±¡
          return "MySQL è¿æ¥æˆåŠŸï¼"
      except Exception as e:
          return f"MySQL è¿æ¥å¤±è´¥: {str(e)}"
  
  ```

* `run.py`

  ```python
  from app import app  # ä» app/__init__.py æ–‡ä»¶ä¸­å¯¼å…¥ app å®ä¾‹
  
  # # æ–¹æ¡ˆBï¼ˆå·¥å‚å‡½æ•°æ¨¡å¼ï¼‰
  # from app import create_app
  # app = create_app()
  
  if __name__ == '__main__':
      app.run(port=5000)
  
  ```

  
